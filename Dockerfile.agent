# 用于 GitHub Action 的 Agent Dockerfile
# 这个 Dockerfile 假设编译产物已经在外部构建完成

FROM alpine:latest

# 安装运行时依赖
RUN apk add --no-cache ca-certificates tzdata

# 设置时区为上海
ENV TZ=Asia/Shanghai

WORKDIR /app

ARG TARGETARCH

# 从外部编译的产物复制 agent 文件
COPY ./bin/agents/pika-agent-linux-${TARGETARCH} ./pika-agent

# 赋予执行权限
RUN chmod +x ./pika-agent

# 启动 agent
ENTRYPOINT ["./pika-agent"]
